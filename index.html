<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>297 Σύστημα Προσκόπων Λατσιών – Eπι-Τελείο 2025</title>
  <style>
    :root{
      --bg:#14532d;
      --panel:#15803d;
      --muted:#fef3c7;
      --accent:#22c55e;
      --accent-light:#4ade80;
      --accent2:#ea580c;
      --accent2-light:#fb923c;
      --good:#4ade80; --bad:#ef4444;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, sans-serif;
      background:
        radial-gradient(1000px 700px at 5% -10%, var(--accent-light) 0, transparent 60%),
        radial-gradient(1200px 800px at 105% 15%, var(--accent2-light) 0, transparent 50%),
        var(--bg);
      color:#fff7ed; display:flex; flex-direction:column; min-height:100%;
    }
    header{
      padding:24px 20px; position:sticky; top:0; z-index:10;
      background: var(--accent2); color: white;
      border-bottom:1px solid rgba(255,255,255,.08)
    }
    .top{display:flex; gap:16px; align-items:center; justify-content:space-between; max-width:1100px; margin:0 auto}
    h1{font-size:clamp(20px, 2.4vw, 36px); color:white; font-weight:800}
    .wrap{width:min(1100px, 100%); margin:0 auto; padding:24px}
    .grid{display:grid; gap:20px; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03)); border:3px solid var(--accent2); border-radius:20px; overflow:hidden; position:relative; box-shadow: 0 10px 30px rgba(0,0,0,0.25); transition: transform .18s ease, box-shadow .18s ease; cursor:pointer;}
    .card:hover{transform: translateY(-3px) scale(1.02); box-shadow:0 16px 40px rgba(0,0,0,0.35);}
   
    .thumbnail {
  width: 100%;
  aspect-ratio: 4/3; /* makes all thumbnails the same rectangle shape */
  background: #052e16;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: scale-down;       /* fills the rectangle */
  display: block;
}

    .locked .thumbnail img{display:none;}
    .locked .thumbnail{color:transparent;}
    .body{padding:16px}
    .name{font-weight:800; font-size:18px; margin-bottom:4px}
    .role{color:var(--muted); font-size:14px}
    footer{color:var(--muted); text-align:center; margin:auto 0 24px; font-size:12px}
    dialog{border:none; border-radius:22px; padding:0; width:min(640px, 96vw); max-width:96vw; background: var(--panel); color:#fff7ed; box-shadow:0 24px 60px rgba(0,0,0,.55); position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);} 
    dialog::backdrop{background: rgba(0,0,0,.6)}
    .modal{padding:44px 38px; display:grid; gap:28px}
    .modal h3{margin:0; font-size:28px; font-weight:800}
    .row{display:flex; gap:16px; align-items:center; flex-wrap:wrap}
    input[type=password]{flex:1 1 380px; background:#052e16; color:#fff7ed; border:2px solid var(--accent2-light); border-radius:18px; padding:22px; font-size:20px;}
    button{background: linear-gradient(180deg, var(--accent2-light), var(--accent2)); color:#001418; border:none; border-radius:18px; padding:18px 28px; font-weight:800; font-size:18px; cursor:pointer; transition: transform .15s ease}
    button:hover{transform: translateY(-1px)}
    .ghost{background:transparent; border:1px solid rgba(255,255,255,0.18); color:#e5e7eb; font-size:16px; padding:16px 24px; border-radius:16px}
    .msg{font-size:15px} .ok{color:var(--good)} .err{color:var(--bad)}
    #adminReset{position:fixed;bottom:12px;right:12px;z-index:9999;padding:10px 14px;background:#ea580c;color:#fff;border:none;border-radius:10px;cursor:pointer;opacity:.6;backdrop-filter:blur(4px)}
    #adminReset:hover{opacity:1}
  </style>
</head>
<body>
  <header>
    <div class="top"><h1>297 Σύστημα Προσκόπων Λατσιών - Επι-Τέλειο 2025</h1></div>
  </header>
  <main id="app" class="wrap"></main>
  <footer>
    <p>ΠΣ : Είναι για διασκέδαση όχι για Security - only for 297 people!</p>
  </footer>
  <dialog id="unlockDialog">
    <form method="dialog" class="modal" id="dialogForm">
      <h3 id="dlgTitle">Unlock</h3>
      <p id="dlgSubtitle">Enter their personal code to reveal their photo & position.</p>
      <div class="row">
        <input type="password" id="codeInput" placeholder="Enter code" autocomplete="off"/>
        <button id="unlockBtn">Unlock</button>
        <button value="cancel" class="ghost">Cancel</button>
      </div>
      <div class="msg" id="dlgMsg"></div>
    </form>
  </dialog>
  <button id="adminReset" aria-label="Reset unlocked profiles">Reset</button>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getDatabase, ref, get, set, onValue } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js';
    const firebaseConfig = { apiKey: "AIzaSyC6zmofAm4TNnhhvhmZs8f5_utV0GEGHmg", authDomain: "scoutsreveal.firebaseapp.com", databaseURL: "https://scoutsreveal-default-rtdb.firebaseio.com", projectId: "scoutsreveal", storageBucket: "scoutsreveal.firebasestorage.app", messagingSenderId: "509893593904", appId: "1:509893593904:web:250f3032a724937d2716f5", measurementId: "G-ZE6W3G5QVE"};
    const appFB = initializeApp(firebaseConfig);
    const db = getDatabase(appFB);
    const unlockedRef = ref(db, 'unlocked');
    const members = [
      { id:'1',  name:'Άνθια', role:'ΑΡΧΗΓΟΣ ΓKΛΙΤΕΡ', image:'images/anthia.jpg', code:'eliaiseteleia' },
      { id:'2',  name:'Μιχάλης', role:'Υπαρχηγός Ομάδας', image:'images/michalis.jpg', code:'apostolaris' },
      { id:'3',  name:'Ραφαέλλα', role:'Υπαρχηγός Ομάδας', image:'images/rafaella.jpg', code:'arxigos' },
      { id:'4',  name:'Γιώργος', role:'Αρχηγός Ομάδας (ΑΟΠ)', image:'images/giorgos.jpg', code:'anthia' },
      { id:'5',  name:'Βάνια', role:'Αρχηγός Αγέλης (ΑΑΛ)', image:'images/vania.jpg', code:'Anth!a9999' },
      { id:'6',  name:'Κατερίνα', role:'Υπαρχηγός Κοινότητας', image:'images/katerina.png', code:'skatomalakia' },
      { id:'7',  name:'Φωτεινή', role:'Αρχηγός Κοινότητας (ΑΚΑ)', image:'images/fotini.png', code:'secretsanta' },
      { id:'8',  name:'Ιωάννα', role:'Υπαρχηγός Κοινότητας', image:'images/ioanna.jpg', code:'fouxia' },
      { id:'9',  name:'Μύρια', role:'Υπαρχηγός Κοινότητας', image:'images/myria.jpg', code:'ageli' },
      { id:'10', name:'Έλια', role:'Υπαρχηγός Αγέλης but ✈️', image:'images/elia.png', code:'miti' },
      { id:'11', name:'Βαρνάβας', role:'Υπαρχηγός Αγέλης but ✈️', image:'images/varnavas.png', code:'christos' },
      { id:'12', name:'Δήμητρα', role:'Υπαρχηγός Αγέλης', image:'images/dimitra.jpeg', code:'tounel' },
      { id:'13', name:'Δέσποινα', role:'Υπαρχηγός Αγέλης', image:'images/despoina.jpg', code:'totem' },
      { id:'14', name:'Μάρκος', role:'Υπαρχηγός Ομάδας but ✈️', image:'images/markos.jpg', code:'elvetiko' },
      { id:'15', name:'Μαρία Π.', role:'Υπαρχηγός Αγέλης but ✈️', image:'images/maria-p.jpg', code:'prosoxi' },
      { id:'16', name:'Μαρία Χ.', role:'Υπαρχηγός Αγέλης', image:'images/maria-x.jpg', code:'daskala' },
      { id:'17', name:'Μαρία Τ.', role:'Υπαρχηγός Αγέλης', image:'images/maria-t.png', code:'nixia' },
      { id:'18', name:'Άνθια Μικρή', role:'Υπαρχηγός Αγέλης', image:'images/anthia-mikri.jpg', code:'mantili' },
      { id:'19', name:'Αγγέλα', role:'Υπαρχηγός Αγέλης', image:'images/aggela.png', code:'loumata' },
      { id:'20', name:'Αχιλλέας', role:'Υπαρχηγός Κοινότητας but ✈️', image:'images/achilleas.png', code:'poreia' }
    ];
    let unlocked = new Set();
    let currentMember = null;
    function render(){
      const app = document.getElementById('app');
      app.innerHTML = '';
      const grid = document.createElement('div');
      grid.className = 'grid';
      members.forEach(m => {
        const isUnlocked = unlocked.has(m.id);
        const card = document.createElement('article');
        card.className = 'card' + (isUnlocked ? '' : ' locked');
        card.innerHTML = `
          <div class="thumbnail">${isUnlocked ? `<img src="${m.image}" alt="${m.name}" />` : ''}</div>
          <div class="body">
            <div class="name">${m.name}</div>
            <div class="role">${isUnlocked ? (m.role||'') : 'Locked'}</div>
          </div>`;
        if(!isUnlocked){ card.addEventListener('click', ()=> openDialog(m)); }
        grid.appendChild(card);
      });
      app.appendChild(grid);
    }
    function openDialog(member){
      currentMember = member;
      document.getElementById('dlgMsg').textContent = '';
      const codeInput = document.getElementById('codeInput');
      codeInput.value='';
      document.getElementById('unlockDialog').showModal();
      setTimeout(()=>codeInput.focus(), 50);
    }
    async function verify(){
      if(!currentMember) return;
      const val = document.getElementById('codeInput').value.trim();
      if(val === currentMember.code){
        const snap = await get(unlockedRef);
        const data = snap.exists() ? (snap.val()) : { ids: [] };
        if(!data.ids.includes(currentMember.id)){
          data.ids.push(currentMember.id);
          await set(unlockedRef, data);
        }
        document.getElementById('dlgMsg').textContent = 'Unlocked!';
        document.getElementById('dlgMsg').className = 'msg ok';
        setTimeout(()=>{ document.getElementById('unlockDialog').close(); }, 250);
      } else {
        document.getElementById('dlgMsg').textContent = 'Λάθος κωδικός';
        document.getElementById('dlgMsg').className = 'msg err';
      }
    }
    document.getElementById('unlockBtn').addEventListener('click', e=>{ e.preventDefault(); verify(); });
    document.getElementById('codeInput').addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); verify(); }});
    onValue(unlockedRef, (snap)=>{
      const ids = snap.exists() ? (snap.val().ids || []) : [];
      unlocked = new Set(ids);
      render();
    });
    (function(){
      const ADMIN_CODE = 'Troop297Reset2025';
      document.getElementById('adminReset').addEventListener('click', async ()=>{
        const code = prompt('Enter admin reset code:');
        if(code === ADMIN_CODE){
          await set(unlockedRef, { ids: [] });
          alert('All profiles have been reset (for everyone).');
        } else if (code !== null) {
          alert('Wrong code.');
        }
      });
    })();
  </script>
</body>
</html>